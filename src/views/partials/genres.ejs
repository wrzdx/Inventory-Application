<section class="admin-content">
  <div class="section-header">
    <h2>Genres List</h2>
    <!-- Инлайновое добавление нового жанра -->
    <form action="/genres/new" method="POST" class="inline-add">
      <input type="text" name="name" placeholder="New Genre" required>
      <button type="submit" class="btn-add">Add</button>
    </form>
  </div>

  <div class="genres-grid">
    <% genres.forEach(gen => { %>
      <div class="genre-card" id="genre-<%= gen.id %>">
        
        <!-- Режим просмотра -->
        <div class="view-mode" style="display: flex; justify-content: space-between; width: 100%; align-items: center;">
          <div class="genre-name"><strong><%= gen.name %></strong></div>
          <div class="genre-actions">
            <button type="button" class="btn-link" onclick="toggleGenreEdit('<%= gen.id %>')">Edit</button>
            <form action="/genres/<%= gen.id %>/delete" method="POST" style="display: inline;">
              <button type="submit" class="btn-delete-icon" title="Delete">&times;</button>
            </form>
          </div>
        </div>

        <!-- Режим редактирования (скрыт) -->
        <form action="/genres/<%= gen.id %>/edit" method="POST" class="edit-mode" style="display: none; width: 100%; gap: 5px;">
          <input type="text" name="name" value="<%= gen.name %>" required style="width: 70%; padding: 2px;">
          <div class="edit-buttons" style="display: flex; gap: 2px;">
            <button type="submit" class="btn-save-sm">✓</button>
            <button type="button" class="btn-cancel-sm" onclick="toggleGenreEdit('<%= gen.id %>')">✕</button>
          </div>
        </form>

      </div>
    <% }) %>
  </div>
</section>

<script>
  function toggleGenreEdit(id) {
    const card = document.getElementById(`genre-${id}`);
    const view = card.querySelector('.view-mode');
    const edit = card.querySelector('.edit-mode');
    
    if (view.style.display === 'none') {
      view.style.display = 'flex';
      edit.style.display = 'none';
    } else {
      view.style.display = 'none';
      edit.style.display = 'flex';
    }
  }
</script>
